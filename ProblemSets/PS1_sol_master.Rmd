---
title: "EC 320 Problem Set 1"
date: "Winter 2022"
name: "PUT YOUR NAME HERE"
output: 
  pdf_document: default
  html_document: default
---

```{r include=FALSE}
library(pacman)
p_load(kableExtra, knitr)
# Knitr options
knitr::opts_chunk$set(
  echo=F,
  warning = F,
  message = F
)  
```

# Expectation
1. Suppose there are two random variables, $x$ and $y$. Answer in the simplest terms possible. 
\begin{enumerate}
  \item Let $z = 2x + 3y$. Find $E(z)$.
  \begin{align}
    E(z)
    &= E(2x+3y) \\
    &= 2E(x)+3E(y)
  \end{align}
  \item Let $w = 3x^2+ 2y$. Find $E(w)$.
  \begin{align}
    E(w)
    &= E(3x^2+ 2y) \\
    &= 3E(x^2)+2E(y)
  \end{align}
  \item Let $x = 6y$. Find $E(z)$ and $E(w)$.
  \begin{align}
    E(z)
    &= E(2x+3y) \\
    &= 2E(x)+3E(y)\\
    &= 2E(6y)+3E(y)\\
    &= 12E(y)+3E(y)\\
    &= 15E(y)
  \end{align}
  \begin{align}
    E(w)
    &= E(3x^2+ 2y) \\
    &= 3E(x^2)+2E(y) \\
    &= 3E((6y)^2)+2E(y)\\
    &= 108E(y^2)+2E(y) 
  \end{align}
  \item Let $\gamma = 5xy$. Find $E(\gamma)$ and $E(\gamma|x=2)$.
  \begin{align}
    E(\gamma)
    &= E(5xy) \\
    &= 5E(xy)
  \end{align}
  \begin{align}
    E(\gamma|x=2)
    &= E(5xy|x=2) \\
    &= 5E(xy|x=2) \\
    &= 10E(y)
  \end{align}
\end{enumerate}


# Population
2. The following is a population distribution on some variable y.
```{r}
library(tidyverse)
tb=tibble(
  y=c(1,3,5,7,9),
  p_y=c(0.2,0.3,0.1,0.2,0.2),
)
knitr::kable(tb, 
             col.names=c("y", "$p(y)$"),
             format="latex",
             booktabs=T,
             escape=F) %>% 
  kable_styling(position="center")
```

```{r include=FALSE}
sum(tb$y*tb$p_y)
sum(exp(tb$y)*tb$p_y)
#sum(tb$y^2*tb$p_y)
sum(exp(tb$y)*tb$p_y)
exp(1)*0.2+exp(3)*0.3+exp(5)*0.1 + exp(7)*0.2 + exp(9)*0.2
exp(4.8)
sum((2*(tb$y)^(-2)+tb$y)*tb$p_y)
```
\begin{enumerate}
  \item Calculate $E(y)$.
  \begin{align}
    E(y)
    &= 1\cdot 0.2 + 3\cdot 0.3 + 5\cdot 0.1 + 7 \cdot 0.2 + 9 \cdot 0.2 \\
    &= 4.8
  \end{align}
  \item Calculate $E(e^y)$.
  \begin{align}
    E(e^y)
    &= 
    e^1 \cdot 0.2 + e^3\cdot 0.3 + e^5\cdot 0.1 + e^7 \cdot 0.2 + e^9 \cdot 0.2 \\
    &\approx 1861.354
  \end{align}
  \item Calculate $e^{E(y)}$.
  \begin{align}
    e^{E(y)} = e^{4.8} \approx 121.5104
  \end{align}
  \item Calculate $E(2y^{-2}+y)$.
  \begin{align}
    E(2y^{-2}+y) 
    &= 2\cdot 0.2 + 0.222\cdot 0.3 + 0.08 \cdot 0.1 + 0.04081633 \cdot 0.2 + 0.02469\cdot 0.2 \\
    &\approx 5.287768
  \end{align}
\end{enumerate}



```{r include = FALSE}
# Previous examples
tb=tibble(
  y = c(1,5,10,11,12,15),
  xinverse=1/(y^2),
  p_y=c(0.2,0.4,0.1,0.1,0.1,0.1),
)
knitr::kable(tb, 
             col.names=c("id","y","x"),
             format="latex",
             booktabs=T,
             escape=F) %>% 
  kable_styling(position="center")
```

```{r include =FALSE}
sum(tb$y*tb$p_y)
sum(tb$y^2*tb$p_y)
sum(exp(tb$y)*tb$p_y)
sum((3*(tb$y)^(-2)+tb$y)*tb$p_y)
```



# Sample
3. The following is a sample data on some variable $y$ and $x$. Answer the following questions.
```{r}
tb=tibble(
  id=1:5,
  y=c(1,3,5,7,9),
  x=c(2,4,6,8,10)
)
knitr::kable(tb, 
             col.names=c("id","$y$","$x$"),
             format="latex",
             booktabs=T,
             escape=F) %>% 
  kable_styling(position="center")
```

```{r include=FALSE}
mean(tb$y)
var(tb$y)
(tb$y-mean(tb$y))^2 %>% sum()/9

mean(tb$x)
var(tb$x)
(tb$x-mean(tb$x))^2 %>% sum()/9
var(tb$x) %>% sqrt()
sd(tb$x)

((tb$y-mean(tb$y))*(tb$x-mean(tb$x))) %>% sum()/9
cov(tb$x, tb$y)
cor(tb$x, tb$y)
cov(tb$x, tb$y)/(sd(tb$x)*sd(tb$y))
```
\begin{enumerate}
  \item Find the sample mean of y.
  \item Find the sample variance of y.
  \item Find the sample mean of x.
  \item Find the sample variance of x.
  \item Find the correlation coefficient between x and y.
\end{enumerate}


# Estimator
\begin{enumerate}
  \item Define in your own words what estimator is.
  \item What is an unbiased estimator of a parameter $\theta$? Use mathematical expressions.
  \item Prove that sample variance is an unbiased estimator to estimate population variance $\sigma^2$.
\end{enumerate}

# Hypothesis Testing
\begin{enumerate}
  \item Describe type I error.
  \item Describe type II error.
\end{enumerate}

# Fundamental Problem of Causal Inference
6. Consider hypothetical data on the countefactual outcomes for six individuals. Answer the following.
```{r}
tb =tibble(
  id=1:6,
  treatment=rep(c(0,1), each=3),
  y0=c(7,4,6,5,3,8),
  y1=c(2,3,9,2,7,1)
)
knitr::kable(tb, 
             col.names=c("i","treatment","$y_{0i}$", "$y_{1i}$"),
             format="latex",
             booktabs=T, 
             escape = F) %>% 
  kable_styling(position="center")
```
\begin{enumerate}
  \item Calculate individual treatment effects.
  \item What is the \textbf{true} average treatment effect?
  \item Fundamental problem of econometrics indicates that we could only observe $y_1$ for those treated and $y_0$ for those untreated. We can never observe their counterfactuals. Estimate the average treatment effects now by comparing the mean of the treated group and the mean of the control group.
  \item Do you think the difference-in-means estimator is an unbiased? Explain your reasoning.
\end{enumerate}
